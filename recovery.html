<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="./assets/img/favicon.svg">

    <!-- font-awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.css">

    <!-- bootstrap-5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

    <!-- normalize and reset -->
    <link rel="stylesheet" href="./assets/css/normalize.css">
    <link rel="stylesheet" href="./assets/css/reset.css">


    <!-- swiper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">

    <script type="text/javascript" src="//code.jquery.com/jquery-1.9.1.js"></script>

    <!-- style -->
    <link rel="stylesheet" href="./assets/css/base.css">
    <link rel="stylesheet" href="./assets/css/header.css">
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/footer.css">
    <link rel="stylesheet" href="./assets/css/modal.css">
    <link rel="stylesheet" href="./assets/css/form.css">
    <link rel="stylesheet" href="./assets/css/toast.css">

    <title class="titlePage" id="titlePage">FZilla - Xem phim trực tuyến</title>
</head>

<body>
    <div class="app">
        <header class="header bg-dark bg-gradient fixed-top">
            <div class="container-lg">
                <!-- Hidden in mobile -->
                <div class="row header__content d-none d-md-flex">
                    <div class="col-3">
                        <a href="./index.html"><img class="header__brand" src="./assets/img/brand.png" alt="" /></a>
                    </div>

                    <div class="col-6 d-flex justify-content-center align-items-center">
                        <form class="search-form d-flex justify-content-center" role="search">
                            <input class="search-form__input rounded-1 form-control" type="text"
                                placeholder="Tìm kiếm thể loại, phim,..." aria-label="Search"
                                aria-describedby="button-addon2" value="" />
                            <button class="search-form__reset" type="reset">
                                <i class="fa-solid fa-xmark"></i>
                            </button>

                            <div class="search-history">
                                <!-- Lich su tim kiem -->
                            </div>

                            <button class="search-form__submit btn btn-sm" type="submit">
                                <i class="fa fa-search" aria-hidden="true"></i>
                            </button>
                        </form>
                    </div>

                    <div class="col-3">
                        <div class="header__user header__user--logged-out d-flex justify-content-end">
                            <a class="nav-link nav-link--account" href="login.html">Đăng nhập</a>
                            <a class="nav-link nav-link--account" href="register.html">Đăng ký</a>

                            <div class="dropdown">
                                <a class=" nav-link dropdown__btn dropdown__btn--account nav-link--username"></a>
                                <ul class="dropdown__list dropdown__list--account bg-dark bg-gradient">
                                    <li class="dropdown__list-item">
                                        <a class="nav-link" href="user_profile.html">
                                            <i class="fa-regular fa-user"></i> Hồ sơ cá nhân
                                        </a>
                                    </li>
                                    <li class="dropdown__list-item">
                                        <a class="nav-link user-logout" href="#">
                                            <i class="fa-solid fa-right-from-bracket"></i> Đăng xuất
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <nav class="navbar navbar-expand-md p-0 m-0">
                    <div class="container-fluid p-0 p-md-0 py-2">
                        <div class="d-md-none col-8">
                            <a href="./index.html"><img class="header__brand" src="./assets/img/brand.png" alt="" /></a>
                        </div>

                        <!-- Button trigger modal -->
                        <button type="button" class="btn modal-btn--search col-2 d-md-none" data-bs-toggle="modal"
                            data-bs-target="#searchModalMobile">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </button>

                        <button class="navbar-toggler col-2" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false"
                            aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>

                        <div class="navbar-collapse collapse" id="navbar-content">
                            <div class="container-fluid d-sm-block d-md-none mb-2">
                            </div>

                            <ul class="navbar-nav me-auto">
                            </ul>

                            <div class="dropdown">
                                <a class="dropdown__btn dropdown__btn--bookmark nav-link nav-link--bookmark" href="#"><i
                                        class="fa-regular fa-bookmark"></i></a>
                                <div class="dropdown__list dropdown__list--bookmark bg-dark bg-gradient bookmark">
                                    <div class="bookmark-wrapper">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
        </header>

        <main class="bg bg-dark bg-gradient main">
            <div class="form-container bg-light">
                <h1 class="form__heading mt-2 text-uppercase">
                    Khôi phục tài khoản
                </h1>
                <form class="form form-recovery" id="form-recovery_1">
                    <p class="form_infor form__item">Nhập email của bạn để lấy lại mật khẩu</p>
                    <div class="input-group form__item">
                        <div class="form-floating form__item">
                            <input type="text" class="form-control form__input" id="email" name="email"
                                placeholder="email">
                            <label for="email" class="form__label">Email</label>
                        </div>
                        <span class="form__message"></span>
                    </div>
                    <button type="submit" class="input-group btn form__btn form__btn--submit">Xác nhận</button>
                </form>
                <form class="form form-recovery" id="form-recovery_2" hidden>
                    <p class="form_infor form__item">Vui lòng kiểm tra email để lấy mã xác nhận</p>
                    <div class="input-group form__item">
                        <div class="form-floating form__item">
                            <input type="text" class="form-control form__input" id="code_identify" name="code_identify"
                                placeholder="Mã xác nhận">
                            <label for="code_identify" class="form__label">Mã xác nhận</label>
                        </div>
                        <span class="form__message"></span>
                    </div>
                    <button type="reset" class="rp_code_identify input-group btn form__btn form__btn--change">Gửi lại mã
                        xác nhận (<span id="countdown"> 60</span>s)</button>
                    <button type="submit" class="input-group btn form__btn form__btn--submit">Xác nhận</button>
                </form>
                <form class="form form-recovery" id="form-recovery_3" hidden>
                    <div class="input-group form__item">
                        <div class="form-floating form__item">
                            <input type="password" class="form-control form__input" id="password" name="password"
                                placeholder="Mật khẩu">
                            <label for="password" class="form__label">Mật khẩu</label>
                        </div>
                        <span class="form__message"></span>
                    </div>
                    <div class="input-group form__item">
                        <div class="form-floating form__item">
                            <input type="password" class="form-control form__input" id="password-repeat"
                                name="password-repeat" placeholder="Nhập lại mật khẩu">
                            <label for="passwordrp" class="form__label">Nhập lại mật khẩu</label>
                        </div>
                        <span class="form__message"></span>
                    </div>

                    <button type="submit" class="input-group btn form__btn form__btn--submit">Đổi mật khẩu</button>
                </form>

            </div>

        </main>

        <footer class="footer bg-black bg-gradient">
            <div class="container-lg">
                <div class="row">
                    <div class="ps-2 col-md-6 footer__content row">
                        <div class="pt-3 pt-md-0 col-3 col-md-12">
                            <a href="./index.html"><img class="footer__brand" src="./assets/img/brand.png" alt="" /></a>
                        </div>
                        <div class="col-9 col-md-12">
                            <p class="footer__desc">
                                Website được xây dựng bởi <b>FZilla</b> <br>
                                Chúc bạn có những giây phút xem phim vui vẻ!<br>
                                Liên lạc với chúng tôi <a class="btn footer__contact-btn" href="./contact.html">Tại
                                    đây</a>
                            </p>
                        </div>
                    </div>

                    <div class="col-md-2 d-none d-md-block footer__content">
                        <div class="footer__content-title">Thể loại</div>
                        <ul>
                            <li>
                                <a class="footer-link">Hành động</a>
                            </li>
                            <li>
                                <a class="footer-link">Viễn tưởng</a>
                            </li>
                            <li>
                                <a class="footer-link">Anime</a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-6 col-md-2 footer__content ps-sm-1">
                        <div class="footer__content-title">Quy định</div>
                        <ul>
                            <li>
                                <a class="footer-link">Quy định chung</a>
                            </li>
                            <li>
                                <a class="footer-link">Quyền riêng tư</a>
                            </li>
                            <li>
                                <a class="footer-link">Bản quyền</a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-6 col-md-2 footer__content">
                        <div class="footer__content-title">Contact us</div>
                        <ul>
                            <li>
                                <a class="footer-link"><i class="fa-brands fa-facebook-f"></i> Facebook</a>
                            </li>
                            <li>
                                <a class="footer-link"><i class="fa-brands fa-instagram"></i> Instagram</a>
                            </li>
                            <li>
                                <a class="footer-link"><i class="fa-brands fa-github"></i> Github</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="copyright"><i class="fa-regular fa-copyright"></i> 2023 FZilla. Bản quyền thuộc về FZilla</div>
        </footer>

    </div>

    <div class="to-top-btn" title="Về đầu trang">
    </div>

    <!-- Modal -->
    <div class="modal fade" id="searchModalMobile" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body modal-body--mobile d-flex align-items-center">
                    <form class="search-form d-flex justify-content-center" role="search">
                        <input class="search-form__input rounded-1 form-control" type="text"
                            placeholder="Tìm kiếm thể loại, phim,..." aria-label="Search"
                            aria-describedby="button-addon2" value="" />
                        <button class="search-form__reset" type="reset">
                            <i class="fa-solid fa-xmark"></i>
                        </button>
                        <button class="search-form__submit btn btn-sm" type="submit">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </button>
                    </form>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <!-- bootstrap 5 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous">
        </script>

    <!-- swiper -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>

    <script src="./assets/js/userData.js"></script>
    <script src="./assets/js/movieData.js"></script>
    <script src="./assets/js/main.js"></script>
    <script src="./assets/js/render.js"></script>
    <script src="./assets/js/renderMovie.js"></script>
    <script src="./assets/js/swiperCarousel.js"></script>
    <script src="./assets/js/navbar.js"></script>
    <script src="./assets/js/bookmark.js"></script>
    <script src="./assets/js/user.js"></script>
    <script src="./assets/js/search.js"></script>
    <script src="./assets/js/formValidator.js"></script>
    <script src="./assets/js/recovery.js"></script>
    <script src="./assets/js/toast.js"></script>

    <script>
        Validator({
            form: '#form-recovery_1',
            formMessage: '.form__message',
            formGroup: '.input-group',
            rules: [
                Validator.require('#email', '* Vui lòng nhập email'),
                Validator.isEmail('#email', '* Email không hợp lệ'),
            ],
            handleFormOnSubmit(values) {
                // call API
                console.log('Form values: ', values);

                // Thông báo đã gửi email và chuyển sang bước kế tiếp

                toast({ title: 'Thông tin', message: 'Email đã được gửi vào hòm thư, vui lòng kiểm tra!', type: 'info', duration: 3000 });

                console.log('');

                nextStep1();
            }
        });
        Validator({
            form: '#form-recovery_2',
            formMessage: '.form__message',
            formGroup: '.input-group',
            rules: [
                Validator.require('#code_identify', '* Vui lòng nhập mã xác nhận'),
            ],
            handleFormOnSubmit(values) {
                // call API
                console.log('Form values: ', values);

                // Thông báo xac nhan
                if (values['code_identify'] !== '123456') {
                    console.log('');
                    toast({ title: 'Thất bại', message: 'Mã xác nhận không đúng, vui lòng kiểm tra lại!', type: 'error', duration: 3000 });
                }
                else {
                    console.log('Nhập mật khẩu mới');
                    toast({ title: 'Xác nhận thành công', message: 'Nhập mật khẩu mới!', type: 'success', duration: 3000 });


                    nextStep2();
                }

            }
        });
        Validator({
            form: '#form-recovery_3',
            formMessage: '.form__message',
            formGroup: '.input-group',
            rules: [
                Validator.require('#password', '* Vui lòng nhập mật khẩu'),
                Validator.require('#password-repeat', '* Vui lòng nhập lại mật khẩu'),
                Validator.requireMinLength('#password', 6, '* Mật khẩu phải chứa ít nhất 6 kí tự'),
                Validator.requireMinLength('#password-repeat', 6, '* Mật khẩu phải chứa ít nhất 6 kí tự'),
            ],
            handleFormOnSubmit(values) {
                // call API
                console.log('Form values: ', values);

                // Thong bao doi mat khau thanh cong
                toast({ title: 'Thành công', message: 'Đổi mật khẩu thành công!', type: 'success', duration: 3000 });


                setTimeout(() => {
                    window.location.href = './index.html';
                }, 1500);
            }
        });

    </script>
</body>

</html>